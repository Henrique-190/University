extends layout

block content
  .modal(id="fav")
  .w3-card-4
    header.w3-container.w3-teal
      h1 #{acordao.tribunal} | Página de Sugestão #{sugestao.id} 

    section
      h2.w3-center.w3-panel.w3-leftbar.w3-rightbar.w3-topbar.w3-bottombar.w3-border-teal.w3-margin Sugestão
      form.w3-container(method="POST")
        fieldset 
          legend Dados Sugeridos
          input(type="hidden" name="tribunal" value=acordao.tribunal)
          for val,key in sugestao.acordao 
            if key != "__v" && key != "_id" && key != "tribunal"
              label #[b #{key}:]
              if val.length > 50
                textarea.w3-text-area.w3-round(type="text" name=key style="width: 100%; max-width:100%; min-width:100%; height: 150px" readonly) #{val}
              else
                input.w3-input.w3-round(type="text" name=key value=val readonly)
        fieldset 
          legend Metadados
          for val,key in sugestao
            if key == "id_acordao"
              label #[b #{key}:]
              input.w3-input.w3-round(type="text" name=key value=val readonly)
            else if key == "Descritores"
              label #[b #{key}:]
              ul.w3-ul
                for descritor in val
                  li #{descritor}
            else if key != "__v" && key != "acordao"
              label #[b #{key}:]
              .w3-input.w3-round #{val}

        if admin && sugestao.estado == "Em Análise"
          button.w3-btn.w3-mb-2.w3-red.w3-right.w3-margin-right(type="submit" id="recusa") Recusar
          button.w3-btn.w3-mb-2.w3-green.w3-right.w3-margin-right(type="submit" id="aceita") Aceitar

    section
      h2.w3-center.w3-panel.w3-leftbar.w3-rightbar.w3-topbar.w3-bottombar.w3-border-teal.w3-margin Acordão Original
    // FALTAM OS RESTANTES CAMPOS DEFAULT
    ul.w3-ul.w3-card-4.w3-margin(id="list")
      for val,key in acordao
        if key == "Descritores"
              label #[b #{key}:]
              ul.w3-ul
                for descritor in val
                  li #{descritor}
        else if key != "_id"
            label #[b #{key}:]
            li(id=key) #{val}

    footer.w3-container.w3-teal
      h5 Generated by GCF & HJFA in #{d} #[a.w3-right(href="/") Página Principal]
    script.
      $("#aceita").click(function() {
        $(this).closest("form").attr("action", "/sugestoes/aceita/"+"#{sugestao.id}");     
      });
      $("#recusa").click(function() {
          $(this).closest("form").attr("action", "/sugestoes/recusa/"+"#{sugestao.id}");       
      });
      